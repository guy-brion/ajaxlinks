(function(a){a.fn.ajaxlinks=function(b){var c={load_to:"#content",load_from:null,loader:"<span>Loading...</span>",callback:null,use_sammy:false,prefix:"",smooth_height:true};var d=a.extend(c,b);d.links=this;var e="";var f=function(b){var c={};if(typeof a.sammy=="function"&&d.use_sammy==true){var f=b.split("|");for(var g=0,h=f.length;g<h;g++){var i=f[g].split("=");c[i[0]]=i[1]}}else{c.path=b}var j=function(e,f,g){if(d.smooth_height){l.height("auto")}if(!d.callback){return}var h=a(this).html();if(d.load_from&&e){if(a(this).find(d.load_from).length>0){h=a(this).find(d.load_from).html();l.html(h)}else{h=e;l.html(h)}}var i=d.links.filter('[href*="'+b+'"]');d.callback(h,i,c)};if(e!=c.path){e=c.path;var k=d.load_from?[c.path,d.load_from].join(" "):c.path,l=a(d.load_to);if(d.smooth_height){l.height(l.height())}l.html(a(d.loader)).load(k,j)}else{j()}};if(typeof a.sammy=="function"&&d.use_sammy==true){if(a.sammy.apps==undefined){var g=a.sammy(function(){this.get(/\#!(.*)/,function(a){f(window.location.href.split("#!")[1])})});a(function(){g.run()})}this.each(function(b,c){var e=a(c).attr("href");if(e!=undefined&&e.indexOf("#!")==-1){a(c).attr("href",[d.prefix,"#!path=",e].join(""))}})}else{this.each(function(b,c){a(c).bind("click",function(){f(a(this).attr("href"));return false})})}}})(jQuery)