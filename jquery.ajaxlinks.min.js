(function(e){e.fn.ajaxlinks=function(t){var n={load_to:"#content",load_from:null,loader:"<span>Loading...</span>",callback:null,use_sammy:false,prefix:"",smooth_height:true,goto_top:false,fix_forms:true};var r=e.extend(n,t);r.links=this;var i="";var s=function(t){if(r.goto_top){window.scrollTo(0,0)}var n={};if(typeof e.sammy=="function"&&r.use_sammy==true){var s=t.split("|");for(var o=0,u=s.length;o<u;o++){var a=s[o].split("=");if(a.length>2){var f=a[1];for(o=2;o<a.length;o++){var f=[f,"=",a[o]].join("")}n[a[0]]=f}else{n[a[0]]=a[1]}}}else{n.path=t}var l=function(i,s,o){if(r.smooth_height){h.height("auto")}var u=e(this).html();if(r.load_from&&i){if(e(this).find(r.load_from).length>0){u=e(this).find(r.load_from).html();h.html(u)}else{u=i;h.html(u)}}if(r.fix_forms){e('[action="."]').attr("action",t.replace("path=",""))}if(r.callback){var a=r.links.filter('[href*="'+t+'"]');r.callback(u,a,n)}};i=n.path;var c=r.load_from?[n.path,r.load_from].join(" "):n.path,h=e(r.load_to);if(r.smooth_height){h.height(h.height())}h.html(e(r.loader)).load(c,l)};if(typeof e.sammy=="function"&&r.use_sammy==true){if(e.sammy.apps==undefined){var o=e.sammy(function(){this.get(/\#!(.*)/,function(e){s(window.location.href.split("#!")[1])})});e(function(){o.run()})}this.each(function(t,n){var i=e(n).attr("href");if(i!=undefined&&i.indexOf("#!")==-1){e(n).attr("href",[r.prefix,"#!path=",i].join(""))}})}else{this.each(function(t,n){e(n).bind("click",function(){s(e(this).attr("href"));return false})})}}})(jQuery)